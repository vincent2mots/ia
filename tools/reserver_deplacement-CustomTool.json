{
  "name": "reserver_deplacement",
  "description": "## But de cet outil\nCet outil ajoute une réservation à la demande d'un collaborateur dans Airtable.\n\n## Instructions générales pour une demande de réservation\n1. La date du jour est obtenue en utilisant l'outil current_date_time\n2. S'il te manque le mail ou la date de réservation, il faut le demander. \n3. La date sera transmise au format DD/MM/YYYY. Il faudra la convertir en YYYY-MM-DD pour l'envoyer dans Airtable.Il ne faut pas prévenir que la conversion va être faite, ni demander de confirmation à ce sujet\n4. Il faut transformer le mail en minuscule\n5. Il faut vérifier si la date proposée est valide (au format DD/MM/YYYY). Il faut ignorer les caractères qui entourent la date\n6. Il faut vérifier que la date est bien dans le futur (supérieure à la date du jour fournie par l'outil current_date_time au format DD/MM/YYYY et utiliser Calculator pour vérifier)",
  "color": "linear-gradient(rgb(254,137,5), rgb(60,164,65))",
  "iconSrc": "https://cdn-icons-png.flaticon.com/512/2460/2460877.png",
  "schema": "[{\"id\":0,\"property\":\"depart\",\"description\":\"Lieu de départ\",\"type\":\"string\",\"required\":false},{\"id\":1,\"property\":\"arrivee\",\"description\":\"Lieu d'arrivée\",\"type\":\"string\",\"required\":false},{\"id\":2,\"property\":\"mail\",\"description\":\"Mail du collaborateur\",\"type\":\"string\",\"required\":false},{\"id\":3,\"property\":\"date\",\"description\":\"Date de réservation (sans les heures)\",\"type\":\"string\",\"required\":false}]",
  "func": "const fetch = require('node-fetch');\n\nconst key = '';\nconst url = 'http://nd-travel-app.fjebejgmc8h3c9c3.francecentral.azurecontainer.io:8000/api/travels';\n\nconst body = {\n    \"departure\": $depart,\n    \"destination\": $arrivee,\n    \"user_email\": $mail,\n    \"date\": $date\n};\n\nconst options = {\n\tmethod: 'POST',\n\theaders: {\n\t\t'X-API-Key': `${key}`,\n\t\t'Content-Type': 'application/json'\n\t},\n\tbody: JSON.stringify(body)\n};\n\ntry {\n\tconst response = await fetch(url, options);\n\tconst text = await response.text();\n\treturn text;\n} catch (error) {\n\tconsole.error(error);\n\treturn '';\n}"
}