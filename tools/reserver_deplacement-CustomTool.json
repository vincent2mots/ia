{
  "name": "reserver_deplacement",
  "description": "## But de cet outil\nCet outil ajoute une réservation à la demande d'un collaborateur dans Airtable.\n\n## Instructions générales pour une demande de réservation\n1. La date du jour est obtenue en utilisant l'outil current_date_time\n2. S'il te manque le prénom, le nom ou la date de réservation, il faut le demander. \n3. La date sera transmise au format DD/MM/YYYY. Il faudra la convertir en YYYY-MM-DD pour l'envoyer dans Airtable\n4. Il faut transformer le nom et le prénom en majuscule\n5. Il faut vérifier si la date proposée est valide (au format DD/MM/YYYY). Il faut ignorer les caractères qui entourent la date\n6. Il faut vérifier que la date est bien dans le futur (supérieure à la date du jour fournie par l'outil current_date_time au format DD/MM/YYYY et utiliser Calculator pour vérifier)",
  "color": "linear-gradient(rgb(254,137,5), rgb(60,164,65))",
  "iconSrc": "https://cdn-icons-png.flaticon.com/512/2460/2460877.png",
  "schema": "[{\"id\":0,\"property\":\"depart\",\"description\":\"Lieu de départ\",\"type\":\"string\",\"required\":false},{\"id\":1,\"property\":\"arrivee\",\"description\":\"Lieu d'arrivée\",\"type\":\"string\",\"required\":false},{\"id\":2,\"property\":\"nom\",\"description\":\"Nom du collaborateur\",\"type\":\"string\",\"required\":false},{\"id\":3,\"property\":\"prenom\",\"description\":\"Prénom du collaborateur\",\"type\":\"string\",\"required\":false},{\"id\":4,\"property\":\"date\",\"description\":\"Date de réservation (sans les heures)\",\"type\":\"string\",\"required\":false}]",
  "func": "const fetch = require('node-fetch');\nconst baseId = '';\nconst tableId = '';\nconst token = '';\n\nconst body = {\n\t\"records\": [\n\t\t{\n\t\t\t\"fields\": {\n\t\t\t\t\"départ\": $depart,\n\t\t\t\t\"arrivée\": $arrivee,\n                \"nom\": $nom,\n                \"prenom\": $prenom,\n                \"date réservation\": $date,\n\t\t\t}\n\t\t}\n\t]\n};\n\nconst options = {\n\tmethod: 'POST',\n\theaders: {\n\t\t'Authorization': `Bearer ${token}`,\n\t\t'Content-Type': 'application/json'\n\t},\n\tbody: JSON.stringify(body)\n};\n\nconst url = `https://api.airtable.com/v0/${baseId}/${tableId}`\n\ntry {\n\tconst response = await fetch(url, options);\n\tconst text = await response.text();\n\treturn text;\n} catch (error) {\n\tconsole.error(error);\n\treturn '';\n}"
}